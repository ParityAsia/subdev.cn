<!DOCTYPE html>
<html lang="en" data-theme="">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"main":["/main.836d044100531021daee.css","/main.93aa3b6905088093c019.js"],"component---site-src-pages-index-jsc-4-f-f99":["/component---site-src-pages-index-jsc-4-f-f99.9f99729bff7f082bd679.css","/component---site-src-pages-index-jsc-4-f-f99.4dbe092a57b256f3b730.js"],"component---theme-blog-post-pageccc-cab":["/component---theme-blog-post-pageccc-cab.42d18faa279882580cbb.css","/component---theme-blog-post-pageccc-cab.b3362426b7383091a00a.js"],"content---blog-welcomeb-48-2cd":["/content---blog-welcomeb-48-2cd.73b6762912f470789565.js"],"metadata---blog-welcome-85-b-230":["/metadata---blog-welcome-85-b-230.768e98c56acd62aa823b.js"],"component---theme-blog-list-pagea-6-a-7ba":["/component---theme-blog-list-pagea-6-a-7ba.42d18faa279882580cbb.css","/component---theme-blog-list-pagea-6-a-7ba.60ea72a931dbf83f146a.js"],"content---bloge-97-932":["/content---bloge-97-932.b2b0ea71e9571fa7bd13.js"],"metadata---blog-1-a-9-d63":["/metadata---blog-1-a-9-d63.ab533d3c110de8a7fe5d.js"],"component---theme-doc-page-1-be-9be":["/component---theme-doc-page-1-be-9be.a7dc664af81736e8f518.css","/component---theme-doc-page-1-be-9be.ab9a00c6fdeff7ab6037.js"],"docsMetadata---docs-1-da-721":["/docsMetadata---docs-1-da-721.2695470150772b14d229.js"],"component---theme-doc-item-178-a40":["/component---theme-doc-item-178-a40.de2648345892298aff25.css","/component---theme-doc-item-178-a40.1d7fa0e4bc25208b5e39.js"],"content---docs-mdxce-3-7d1":["/content---docs-mdxce-3-7d1.1141d8d7bd555f5da647.js"],"metadata---docs-mdx-514-01a":["/metadata---docs-mdx-514-01a.68ad334d11b01e6392ea.js"],"content---docs-learn-resource-2-c-1-161":["/content---docs-learn-resource-2-c-1-161.b41249bdfbf8a29c47bf.js"],"metadata---docs-learn-resourcee-73-397":["/metadata---docs-learn-resourcee-73-397.17c10b990d0587bd8e42.js"],"content---docs-doc-1-b-2-f-e80":["/content---docs-doc-1-b-2-f-e80.44f77d7f2842b5f1e2c6.js"],"metadata---docs-doc-1456-c0d":["/metadata---docs-doc-1456-c0d.c4b5769471da7e856e3e.js"],"content---docs-how-to-dev-140-b59":["/content---docs-how-to-dev-140-b59.cf8f4cbad52cc993c4e8.js"],"metadata---docs-how-to-dev-433-5a5":["/metadata---docs-how-to-dev-433-5a5.503f1424699b417eafab.js"],"content---docs-dappchain-install-5-f-8-0ef":["/content---docs-dappchain-install-5-f-8-0ef.c2042f87d0ef0adae9ad.js"],"metadata---docs-dappchain-install-3-c-7-2f4":["/metadata---docs-dappchain-install-3-c-7-2f4.d0d19358d56462e778fe.js"],"content---docs-dappchain-add-ui-5-aa-2ba":["/content---docs-dappchain-add-ui-5-aa-2ba.f94adf0d92e3cab73e94.js"],"metadata---docs-dappchain-add-ui-302-fff":["/metadata---docs-dappchain-add-ui-302-fff.0227a0365d31b0cb5f56.js"],"content---docs-dappchain-deploy-standalonea-8-c-6cd":["/content---docs-dappchain-deploy-standalonea-8-c-6cd.d218a3b53a371b3166f6.js"],"metadata---docs-dappchain-deploy-standaloneafb-dc1":["/metadata---docs-dappchain-deploy-standaloneafb-dc1.32da9e7f55c55fdff2d5.js"],"content---docs-dappchain-deploy-parachainf-8-f-356":["/content---docs-dappchain-deploy-parachainf-8-f-356.8e7e39424a8cf806b011.js"],"metadata---docs-dappchain-deploy-parachain-289-f9f":["/metadata---docs-dappchain-deploy-parachain-289-f9f.18df9d01943bd5e8b00a.js"],"content---docs-dappchain-deploy-parathread-801-a53":["/content---docs-dappchain-deploy-parathread-801-a53.99d16f1c8a52b4549e0f.js"],"metadata---docs-dappchain-deploy-parathreade-66-45c":["/metadata---docs-dappchain-deploy-parathreade-66-45c.3ae956ff10c5429b0926.js"],"content---docs-dappchain-setup-local-networkab-6-25a":["/content---docs-dappchain-setup-local-networkab-6-25a.02ccdae9314536762a6a.js"],"metadata---docs-dappchain-setup-local-network-7-ef-9f2":["/metadata---docs-dappchain-setup-local-network-7-ef-9f2.859479e5fe732db6e735.js"],"content---docs-dappchain-add-test-8-f-2-61d":["/content---docs-dappchain-add-test-8-f-2-61d.2fb26062becf535835a1.js"],"metadata---docs-dappchain-add-test-033-2cf":["/metadata---docs-dappchain-add-test-033-2cf.319127b151a3a892e950.js"],"content---docs-dappchain-add-custom-module-97-c-a8e":["/content---docs-dappchain-add-custom-module-97-c-a8e.98fc8da4b70f63ada21d.js"],"metadata---docs-dappchain-add-custom-moduleec-1-73a":["/metadata---docs-dappchain-add-custom-moduleec-1-73a.c766820bd926b6484c5f.js"],"component---theme-blog-tags-posts-page-687-b6c":["/component---theme-blog-tags-posts-page-687-b6c.42d18faa279882580cbb.css","/component---theme-blog-tags-posts-page-687-b6c.33a3b94514e858c5462e.js"],"metadata---blog-tags-general-9-d-5-ff6":["/metadata---blog-tags-general-9-d-5-ff6.3737dabb1d5a6360bfc4.js"],"metadata---blog-tags-hellof-1-a-1d2":["/metadata---blog-tags-hellof-1-a-1d2.5be5028f62f4cf1ffc63.js"],"component---theme-blog-tags-list-page-01-a-d0b":["/component---theme-blog-tags-list-page-01-a-d0b.57463733529edf424175.js"],"tags---blog-tagsba-6-d64":["/tags---blog-tagsba-6-d64.2948d782032616c7f9ad.js"]};/*]]>*/</script>

<title data-react-helmet="true">构建开发网络</title>

<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width"/><meta data-react-helmet="true" property="og:title" content="Substrate 开发者社区 · 助力区块链开发者"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="description" content="通过这一节，你会学到："/><meta data-react-helmet="true" property="og:description" content="通过这一节，你会学到："/><meta data-react-helmet="true" property="og:url" content="https://subdev.cn/docs/dappchain/setup_local_network"/>

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"/>


<link rel="stylesheet" type="text/css" href="/main.836d044100531021daee.css" />

<link rel="stylesheet" type="text/css" href="/0.beb5263729d2db16c046.css" />

<link rel="stylesheet" type="text/css" href="/1.2d0cefca6f8bbc3f601c.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-page-1-be-9be.a7dc664af81736e8f518.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-item-178-a40.de2648345892298aff25.css" />

</head>
<body >
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="My Site Logo"/><strong class="">主页</strong></a><a class="navbar__item navbar__link" label="学习资料" position="left" href="/docs/learn_resource">学习资料</a><a class="navbar__item navbar__link" to="https://substrater.org" label="论坛" position="left" activeClassName="navbar__link--active" href="https://substrater.org">论坛</a><a class="navbar__item navbar__link" label="博客" position="left" href="/blog">博客</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="https://github.com/substrater/subdev.cn" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_16vC moon_1N64"></span></div><div class="react-toggle-track-x"><span class="toggle_16vC sun_3CZP"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="My Site Logo"/><strong>主页</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" label="学习资料" position="left" href="/docs/learn_resource">学习资料</a></li><li class="menu__list-item"><a class="menu__link" to="https://substrater.org" label="论坛" position="left" activeClassName="navbar__link--active" href="https://substrater.org">论坛</a></li><li class="menu__list-item"><a class="menu__link" label="博客" position="left" href="/blog">博客</a></li><li class="menu__list-item"><a class="menu__link" href="https://github.com/substrater/subdev.cn" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div></div></div></nav><main class="main"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">如何学习</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/learn_resource">资料列表</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">区块链应用开发</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/dappchain/install">安装开发环境</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/dappchain/setup_local_network">构建开发网络</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/dappchain/add_custom_module">开发功能模块</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/dappchain/add_test">添加测试</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/dappchain/add_ui">添加前端页面</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><header><h1 class="docTitle_1vWb">构建开发网络</h1></header><article><div class="markdown"><p>通过这一节，你会学到：</p><ul><li>如何创建和编译节点程序</li><li>如何启动节点程序及各项参数配置</li><li>不同的节点网络有什么区别</li><li>如何修改chainspec文件</li></ul><h2><a aria-hidden="true" class="anchor" id="准备环境"></a><a aria-hidden="true" class="hash-link" href="#准备环境">#</a>准备环境</h2><ul><li>Mac OS 或者Linux计算机</li><li>Git</li></ul><h2><a aria-hidden="true" class="anchor" id="创建和编译节点程序"></a><a aria-hidden="true" class="hash-link" href="#创建和编译节点程序">#</a>创建和编译节点程序</h2><h3><a aria-hidden="true" class="anchor" id="方式一"></a><a aria-hidden="true" class="hash-link" href="#方式一">#</a>方式一</h3><ol><li>安装依赖工具，如Rust环境、openssl、cmake、 llvm库：</li></ol><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> https://getsubstrate.io -sSf </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">bash</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>如果感兴趣上面脚本的具体执行内容，可以参考<a href="https://getsubstrate.io">这里</a>。由于国内网络原因，以上脚本可能会下载失败或者过慢，参考下面的方法配置国内的Rust仓库镜像进行下载。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://github.com/kaichaosun/getsubstrate-cn</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> substrate-cn</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> config ~/.cargo/config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./getsubstrate</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><ol start="2"><li>新建节点程序，使用命令行导航至你想要放置节点程序的目录，执行：</li></ol><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">substrate-node-new substrate-demo-node someone</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p> 你也可以替换<code>substrate-demo-node</code>为你想要的节点程序名，替换<code>someone</code>为你自己的名字。等待命令执行完后，一个属于自己的节点程序就完成了。</p><p>注：<code>substrate-node-new</code>命令会帮你拷贝substrate<a href="https://github.com/paritytech/substrate/tree/master/node-template">模板节点程序</a>、初始化WASM的构建环境、编译Rust代码为WASM等，具体内容参考<a href="https://github.com/paritytech/substrate-up/blob/master/substrate-node-new">链接</a>。</p><p>如果发生了代码改动，就需要重新编译。</p><p>首先，编译Rust代码为WASM：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./build.sh</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>之后，编译生成可执行程序：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cargo build --release</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>可执行程序被放为<code>target/release/template-node</code>。</p><h3><a aria-hidden="true" class="anchor" id="方式二"></a><a aria-hidden="true" class="hash-link" href="#方式二">#</a>方式二</h3><p>另外一种创建节点的方式是通过拷贝substrate的Git源码，编译node-template：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://github.com/paritytech/substrate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> checkout -b v1.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> substrate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> node-template</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 初始化WASM的构建环境</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/init.sh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 编译Rust代码为WASM</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/build.sh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 生成可执行程序</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cargo build --release</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>这种方式适合对substrate源码有一定了解的人，<strong>如果是初学者，建议用上面第一种方式</strong>。</p><h2><a aria-hidden="true" class="anchor" id="本地开发网络"></a><a aria-hidden="true" class="hash-link" href="#本地开发网络">#</a>本地开发网络</h2><p>首先清空节点数据库：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./target/release/template-node purge-chain --dev</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>然后启动节点程序：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./target/release/template-node --dev</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p><code>--dev</code>表示我们准备启动一个本地开发链，会自动初始化开发环境所需的数据和配置。</p><p>如果出现了类似下图所示地内容，那恭喜你成功创建了一条本地开发链。</p><p><img src="https://imgur.com/IvBT3Kf.png" alt="dev_node"/></p><p>现在你可以访问<a href="https://substrate-ui.parity.io">https://substrate-ui.parity.io</a>，选择Settings，将remote node设置为Local Node (127.0.0.1:9944)，如下图所示：</p><p><img src="https://imgur.com/MhHLXwb.png" alt="ui_local_node"/></p><p>选择Explorer，就能够看到最新的区块在不断产生。</p><p>下面，我们来发送一笔交易，选择Extrinsics，<code>submit the following extrinsic</code>选择为<code>balances</code> <code>transfer(dest, value)</code>，<code>dest: Address</code>选择为<code>BOB</code>，<code>value: Compact&lt;Balance&gt;</code>设置为你想转账的金额，之后点击Submit Transaction，几秒钟之后会弹出交易成功的提示，这个时候你可以看到Alice的金额减少了，当切换<code>using the selected account</code>为Bob之后，可以看到他的金额增加。</p><p>接下来请你要独立地尝试这个页面上的不同功能，不用担心把辛苦搭建的链玩坏，这也是Substrate的一个好处，可以快速清理垃圾数据。</p><h2><a aria-hidden="true" class="anchor" id="本地多节点测试网络"></a><a aria-hidden="true" class="hash-link" href="#本地多节点测试网络">#</a>本地多节点测试网络</h2><p>这里我们使用本地测试网络内置的账户，首先启动Alice节点：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./target/release/template-node </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --base-path /tmp/alice </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --chain</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">local </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --key //Alice </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --port </span><span class="token number" style="color:rgb(247, 140, 108)">30333</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --telemetry-url ws://telemetry.polkadot.io:1024 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --validator </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --name AlicesNode</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>命令行参数的涵义如下：</p><ul><li><code>--base-path /tmp/alice</code>：节点数据所存储的位置</li><li><code>--chain=local</code>：指定了节点所处的网络类型，这里<code>local</code>表示本地测试网络，<code>dev</code>表示本地开发，<code>staging</code>表示公开测试网络</li><li><code>--key //Alice</code>：模块节点程序启动时需要私钥，这里我们用了预置的Alice用户私钥</li><li><code>--port 30333</code>：指定p2p协议的TCP端口</li><li><code>--telemetry-url ws://telemetry.polkadot.io:1024</code>：将节点的监控数据发送到指定的监控服务器</li><li><code>--validator</code>：启用validator模式，参与区块生产</li><li><code>--name AlicesNode</code>：指定节点名</li></ul><p>命令执行之后，应该能看到以下启动信息：</p><p><img src="https://i.imgur.com/DIINlNw.png" alt="alice_node"/></p><p>打开一个新的命令行窗口，启动Bob节点：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./target/release/template-node </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --base-path /tmp/bob </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --chain</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">local </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --key //Bob </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --port </span><span class="token number" style="color:rgb(247, 140, 108)">30334</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --telemetry-url ws://telemetry.polkadot.io:1024 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --validator </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --name BobsNode </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --bootnodes /ip4/127.0.0.1/tcp/30333/p2p/QmRhEhiX8QHVW87wKCTp3qKyY1X21ycKXKdDBrqSR74NWx</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>这里，我们为Bob节点指定了不同的数据存储路径、p2p端口等，<code>--bootnodes</code>指明了依赖的启动节点信息，这里使用了Alice节点作为启动节点，<code>30333</code>为Alice节点的端口，<code>QmRhEhiX8QHVW87wKCTp3qKyY1X21ycKXKdDBrqSR74NWx</code>为Alice的节点ID。</p><p>如果一切正常，你应该能够看到：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Idle (1 peers), best: #2 (0x5155…5b72), finalized #0 (0x146f…317f), ⬇ 24 B/s ⬆ 0.1kiB/s</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>表示Bob节点连接到Alice节点上了(1 peers)，并且新产生的区块没有最终确定<code>finalized #0 (0x146f…317f)</code>，这是因为模块节点程序没有最终确定性这一功能，想要了解更多，请查看官方文档或者留意我的后续文章。</p><p>然后，和之前的方式相同，在浏览器访问区块的信息。</p><h2><a aria-hidden="true" class="anchor" id="使用新账户启动本地测试网络"></a><a aria-hidden="true" class="hash-link" href="#使用新账户启动本地测试网络">#</a>使用新账户启动本地测试网络</h2><p><strong>生成新账户</strong></p><p>如果我们不想用预置的Alice和Bob账户启动网络，就需要执行<code>subkey -e generate</code>命令生成新账户，生成的内容包含私钥seed，公钥public key和交易地址Address：</p><p>账户1：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Phrase </span><span class="token variable" style="color:rgb(191, 199, 213)">`</span><span class="token variable" style="color:rgb(191, 199, 213)">gas ride shoe victory oil young music trend kingdom rookie south harbor</span><span class="token variable" style="color:rgb(191, 199, 213)">`</span><span class="token plain"> is account:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Seed: 0x9aaae371d50d1109fee8595398e54a86f6c79b116ba1894e8207f503708f7d0f</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Public key </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">hex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">: 0xcc706bd768a54054ac70b3f5568d0103e0f70a2f878e37949e125dd7456ee180</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Address </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">SS58</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">: 5Ggm2DMCG1LRcXUjGE6toVmyHKVSNutzSbUrvQv5gbr5BC6S</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>账户2：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Phrase </span><span class="token variable" style="color:rgb(191, 199, 213)">`</span><span class="token variable" style="color:rgb(191, 199, 213)">real during evidence worry mountain plastic depth desert actress infant age pill</span><span class="token variable" style="color:rgb(191, 199, 213)">`</span><span class="token plain"> is account:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Seed: 0x16208851b59f7c6a383a70342fa0893169c7c3190c543d44bd42833f61e54a56</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Public key </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">hex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">: 0xd6147f4bbb0eeb925e61b31fbed45ab1e3c45fed8d36ce4161c99956dfdf8f9b</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Address </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">SS58</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">: 5GuQCAzXM5xcJfEinUgWnB7PFn2ZGhQfAKAdGRhacRHsXWE9</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>将生成的内容安全地保存起来，通过分享地址给其它节点，实现p2p的连接。</p><p>注：如果没有subkey命令，需要到substrate源码目录下重新编译生成<code>cargo install --force --path subkey subkey</code>。</p><p><strong>构造chainspec文件</strong></p><p>Substrate区块链的初始启动信息在<code>chainspec</code>的json文件中维护着，首先生成一个local测试网络的chainspec:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./target/release/template-node build-spec --chain</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">local </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> localspec.json</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>编辑<code>localspec.json</code>，修改<code>authorities</code>为新生成用户的地址，其它不用修改：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-json codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token property">&quot;consensus&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;authorities&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;5Ggm2DMCG1LRcXUjGE6toVmyHKVSNutzSbUrvQv5gbr5BC6S&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;5GuQCAzXM5xcJfEinUgWnB7PFn2ZGhQfAKAdGRhacRHsXWE9&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;code&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x0061736d01000000018b011660027...&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>修改完后，转换chainspec为原始格式，区别是原始格式的chainspec中所有的字段名都用十六进制进行了编码：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./target/release/template-node build-spec --chain localspec.json --raw </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> customspec.json</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p><strong>启动节点</strong></p><p>启动账户1的节点：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./target/release/template-node </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --base-path /tmp/account1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --chain ./customspec.json </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --key 0x9aaae371d50d1109fee8595398e54a86f6c79b116ba1894e8207f503708f7d0f </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --port </span><span class="token number" style="color:rgb(247, 140, 108)">30333</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --telemetry-url ws://telemetry.polkadot.io:1024 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --validator </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --name Account1Node</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>这里，<code>--chain ./customspec.json</code>是启动区块链所需的chainspec文件。</p><p>启动账户2的几点：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./target/release/template-node </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --base-path /tmp/account2 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --chain ./customspec.json </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --key 0x16208851b59f7c6a383a70342fa0893169c7c3190c543d44bd42833f61e54a56 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --port </span><span class="token number" style="color:rgb(247, 140, 108)">30334</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --telemetry-url ws://telemetry.polkadot.io:1024 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --validator </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --name Account2Node </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --bootnodes /ip4/127.0.0.1/tcp/30333/p2p/5Ggm2DMCG1LRcXUjGE6toVmyHKVSNutzSbUrvQv5gbr5BC6S</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>这时候你已经拥有了属于自己的第一条区块链！</p><h2><a aria-hidden="true" class="anchor" id="总结"></a><a aria-hidden="true" class="hash-link" href="#总结">#</a>总结</h2><p>恭喜你，完成了substrate搭建区块链的第一堂课，我们回顾一下学到的内容，包括安装substrate的依赖环境，创建和编译节点程序，启动测试网络，修改chainspec等等。社区提供了很多的资料供参考，也可以关注知乎专栏<a href="https://zhuanlan.zhihu.com/substrate">《Substrate区块链开发》</a>。</p><h2><a aria-hidden="true" class="anchor" id="参考资料"></a><a aria-hidden="true" class="hash-link" href="#参考资料">#</a>参考资料</h2><ul><li><a href="https://docs.substrate.dev/docs/deploying-a-substrate-node-chain">Start a Private Network with Substrate</a></li></ul></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/dappchain/install"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« <!-- -->安装开发环境</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/dappchain/add_custom_module"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">开发自定义的功能模块<!-- --> »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#准备环境" class="contents__link">准备环境</a></li><li><a href="#创建和编译节点程序" class="contents__link">创建和编译节点程序</a><ul class=""><li><a href="#方式一" class="contents__link">方式一</a></li><li><a href="#方式二" class="contents__link">方式二</a></li></ul></li><li><a href="#本地开发网络" class="contents__link">本地开发网络</a></li><li><a href="#本地多节点测试网络" class="contents__link">本地多节点测试网络</a></li><li><a href="#使用新账户启动本地测试网络" class="contents__link">使用新账户启动本地测试网络</a></li><li><a href="#总结" class="contents__link">总结</a></li><li><a href="#参考资料" class="contents__link">参考资料</a></li></ul></div></div></div></div></div></div></main></div></main><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="Docs" href="/docs/doc1">Docs</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="Discord" href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer">Discord</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="Blog" href="/blog">Blog</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Facebook Open Source Logo" src="https://docusaurus.io/img/oss_logo.png"/></div>Copyright © 2019 SubDev</div></div></footer>
</div>

<script type="text/javascript" src="/runtime~main.4a8ace62b194ef415d26.js"></script>

<script type="text/javascript" src="/main.93aa3b6905088093c019.js"></script>

<script type="text/javascript" src="/0.89b2402f66ddff4a7eca.js"></script>

<script type="text/javascript" src="/1.c0464632d4cea4019eea.js"></script>

<script type="text/javascript" src="/component---theme-doc-page-1-be-9be.ab9a00c6fdeff7ab6037.js"></script>

<script type="text/javascript" src="/docsMetadata---docs-1-da-721.2695470150772b14d229.js"></script>

<script type="text/javascript" src="/component---theme-doc-item-178-a40.1d7fa0e4bc25208b5e39.js"></script>

<script type="text/javascript" src="/content---docs-dappchain-setup-local-networkab-6-25a.02ccdae9314536762a6a.js"></script>

<script type="text/javascript" src="/metadata---docs-dappchain-setup-local-network-7-ef-9f2.859479e5fe732db6e735.js"></script>

</body>
</html>